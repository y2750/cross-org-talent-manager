# 评价系统优先级说明

## 🎯 优先级评估

### **第一优先级（核心功能）** ⭐⭐⭐

**多维度评价系统（包括季度评价体系）** 是整个系统的核心功能，应该作为第一优先级实施。

### 原因分析：

1. **业务核心价值**

   - 评价系统是跨组织人才管理系统的核心功能
   - 没有评价系统，整个系统的价值无法体现
   - 评价数据是人才档案的重要组成部分

2. **依赖关系**

   - 企业积分系统依赖评价系统（评价质量影响积分）
   - 人才看板依赖评价数据（需要评价统计）
   - 档案查阅的价值在于查看评价记录

3. **用户需求迫切性**
   - 企业需要评价系统来管理员工
   - 新雇主需要查看评价来了解候选人
   - 季度评价是常规管理需求

## 📋 第一优先级任务清单

### 1. 数据库结构完善（1 天）

- [x] 修复 evaluation 表结构

  - 添加 `employee_id` 字段（被评价员工）
  - 添加 `employee_profile_id` 字段（关联档案）
  - 添加 `evaluation_type` 字段（评价类型：1=领导，2=同事，3=HR，4=自评）
  - 添加 `evaluation_period` 字段（评价周期：1=季度，2=年度，3=离职，4=临时）
  - 添加 `period_year` 字段（评价年份）
  - 添加 `period_quarter` 字段（评价季度）
  - 添加必要索引

- [x] 创建评价标签表（evaluation_tag）
- [x] 创建评价标签关联表（evaluation_tag_relation）
- [x] 创建评价维度表（evaluation_dimension）
- [x] 创建维度评分表（evaluation_dimension_score）

**执行脚本：** `database_improvements.sql`

### 2. 评价实体与 Mapper（2 天）

- [ ] 创建 `Evaluation` 实体类
- [ ] 创建 `EvaluationTag` 实体类
- [ ] 创建 `EvaluationDimension` 实体类
- [ ] 创建 `EvaluationDimensionScore` 实体类
- [ ] 创建对应的 Mapper 接口

### 3. 评价服务层（5 天）

- [ ] 创建 `EvaluationService` 接口和实现
- [ ] 实现评价创建（包含多维度支持）：
  - 领导评价创建
  - 同事评价创建（需验证同部门）
  - HR 评价创建
  - 自评创建
- [ ] 实现评价查询：
  - 按员工查询
  - 按评价类型查询
  - 按评价周期查询（季度、年度、离职）
  - 按时间范围查询
- [ ] 实现评价更新和删除
- [ ] 实现同事评价权限验证
- [ ] 实现评价统计（综合评分、多维度对比）
- [ ] 实现雷达图数据生成

### 4. 评价控制器（2 天）

- [ ] 创建 `EvaluationController`
- [ ] 实现评价创建接口（支持多种评价类型）
- [ ] 实现评价查询接口（支持多条件筛选）
- [ ] 实现评价更新接口
- [ ] 实现评价删除接口
- [ ] 实现评价统计接口
- [ ] 实现雷达图数据接口

### 5. 标签和维度管理（2 天）

- [ ] 创建 `EvaluationTagService` 和 `EvaluationDimensionService`
- [ ] 实现标签/维度的增删改查（仅管理员）
- [ ] 实现标签/维度列表查询接口
- [ ] 创建对应的 Controller

### 6. 季度评价任务（3 天）

- [ ] 创建定时任务服务
- [ ] 实现季度评价任务生成（每季度初）
- [ ] 实现年度评价任务生成（每年初）
- [ ] 实现离职评价任务生成（离职时触发）
- [ ] 实现评价任务通知

### 7. 前端开发（7 天）

- [ ] 评价创建表单（支持多评价类型）
- [ ] 评价列表展示（支持多条件筛选）
- [ ] 评价详情查看
- [ ] 雷达图组件
- [ ] 评价统计图表
- [ ] 标签和维度管理界面（管理员）
- [ ] 评价任务列表（待评价、已评价）
- [ ] 同事评价界面

**总计：约 22 天（4-5 周）**

## 🔄 实施顺序建议

### 第一阶段：基础功能（1-2 周）

1. 数据库结构完善
2. 评价实体与 Mapper
3. 基础评价服务（领导评价）
4. 基础评价控制器
5. 基础前端界面

### 第二阶段：多维度支持（1-2 周）

1. 同事评价功能
2. HR 评价功能
3. 自评功能
4. 评价类型筛选和统计

### 第三阶段：季度评价体系（1 周）

1. 季度评价字段支持
2. 季度评价任务生成
3. 季度评价查询和统计
4. 离职评价流程

### 第四阶段：增强功能（1 周）

1. 标签化评价
2. 维度评分
3. 评价统计和可视化

## 📊 关键设计点

### 1. 同事评价规则

- **权限验证**：必须同部门
- **频率控制**：同一季度内，同一人对同一人只能评价一次
- **匿名性**：可以考虑匿名评价，减少顾虑
- **权重设置**：同事评价权重可配置（建议 0.3）

### 2. 季度评价流程

- **任务生成**：每季度初自动生成
- **通知机制**：通知部门主管和同事
- **完成要求**：部门主管必须完成，同事评价可选
- **数据统计**：按季度汇总和对比

### 3. 离职评价

- **触发时机**：员工离职时自动触发
- **必填人员**：部门主管和 HR 必须完成
- **关联档案**：评价自动关联到员工档案
- **重要性**：离职评价是档案的重要组成部分

## ⚠️ 注意事项

1. **数据一致性**：不使用外键，需要在应用层保证数据一致性
2. **性能优化**：评价查询可能涉及多表关联，需要优化索引
3. **权限控制**：严格验证评价权限，防止越权评价
4. **数据脱敏**：外部企业查看评价时需要脱敏处理
5. **评价质量**：建立评价质量监控机制，识别异常评价

## 🎯 成功标准

- ✅ 可以创建多种类型的评价（领导、同事、HR、自评）
- ✅ 可以按季度、年度、离职等周期进行评价
- ✅ 同部门员工可以互相评价
- ✅ 可以查询和统计评价数据
- ✅ 可以生成评价报告和可视化图表
- ✅ 季度评价任务可以自动生成
- ✅ 离职时自动触发离职评价流程

## 📝 总结

**多维度评价系统（包括季度评价体系）是第一优先级任务**，应该优先实施。这是整个系统的核心功能，其他功能都依赖于此。建议在 4-5 周内完成基础功能和多维度支持，然后逐步完善季度评价体系和增强功能。
